<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="/static/img/favicon.ico"/>
    <title>Super charge a Google cloud functions project - Lahiru's dev journal</title>
    <meta name="author" content="Lahiru Pathirage"/>
    <meta name="description" content="Super charge a Google cloud functions project"/>
    <meta name="keywords"
          content="Super charge a Google cloud functions project, Lahiru's dev journal, post"/>
    <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">
    <meta content="1749788565247320" property="fb:app_id">
    <meta content="Lahiru's dev journal" property="og:site_name">

    

    
    <meta content="Super charge a Google cloud functions project" property="og:title">
    <meta content="article" property="og:type">
    

    
    <meta content="Analyze, design, engineer & success" property="og:description">
    

    
    <meta content="https://lahiru.io/post/2020/06/19/gostep-intro.html" property="og:url">
    

    
    <meta content="2020-06-19T00:00:00+05:30" property="article:published_time">
    <meta content="https://lahiru.io/about/" property="article:author">
    

    

    
    
    <meta content="post" property="article:section">
    
    

    
    
    <meta content="gcp, serverless, gostep, python, cli" property="article:tag">
    
    

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@lpsandaruwan">
    <meta name="twitter:creator" content="@lpsandaruwan">

    
    <meta name="twitter:title" content="Super charge a Google cloud functions project">
    

    
    <meta name="twitter:url" content="https://lahiru.io/post/2020/06/19/gostep-intro.html">
    

    
    <meta name="twitter:description" content="Analyze, design, engineer & success">
    

    

    <!-- Font awesome icons -->
    <link href="/static/css/font-awesome.min.css" rel="stylesheet"
          integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
    <!-- syntax highlighting CSS -->
    <link rel="stylesheet" href="/static/css/syntax.css">
    <!-- Bootstrap core CSS -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,300italic,300,400italic,700&amp;subset=latin,latin-ext"
          rel="stylesheet" type="text/css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/css/super-search.css">
    <link rel="stylesheet" href="/static/css/thickbox.css">
    <link rel="stylesheet" href="/static/css/projects.css">
    <link rel="stylesheet" href="/static/css/main.css">

    
</head>
<body>

<div class="container">
    <script src="/static/js/three.r95.min.js"></script>
    <script src="/static/js/vanta.globe.min.js"></script>
    <script>
        VANTA.GLOBE({
            el: "#your-element-selector",
            mouseControls: true,
            touchControls: true,
            minHeight: 200.00,
            minWidth: 200.00,
            scale: 1.00,
            scaleMobile: 1.00,
            color: 0xc83567
        })
    </script>
    <div class="col-sm-3">
        <div class="fixed-condition">
            <img width="130" src="../static/img/prof.jpg" alt="">
            <h1 class="author-name"><a href="/">Lahiru Pathirage</a></h1>
            
            <div class="profile-about">
                A technology enthusiast who believes in good design combining with good engineering thus seeing their importance more than ever when reaching high-quality products.
            </div>
            
            <div class="social">
                <ul>
                    
                    <li><a href="http://facebook.com/lpsandaruwan1" target="_blank"><i class="fa fa-facebook"></i></a></li>
                    
                    <li><a href="http://twitter.com/lpsandaruwan" target="_blank"><i class="fa fa-twitter"></i></a></li>
                    
                    <li><a href="https://linkedin.com/in/lpsandaruwan" target="_blank"><i class="fa fa-linkedin"></i></a></li>
                    
                    <li><a href="https://stackoverflow.com/users/2443322/lpsandaruwan" target="_blank"><i class="fa fa-stack-exchange"></i></a></li>
                    
                    <li><a href="https://github.com/lpsandaruwan" target="_blank"><i class="fa fa-github"></i></a></li>
                    
                </ul>
            </div>
            <div class="search" id="js-search">
                <input type="text" placeholder="(sitemap)~$ type to search" class="search__input form-control"
                       id="js-search__input">
                <ul class="search__results" id="js-search__results"></ul>
            </div>
            <ul class="sidebar-nav">
                <strong>Navigation</strong>
                <li><a href="/">Home</a></li>
                
                <li><a class="about" href="/about/">About Me</a></li>
                
                <li><a class="about" href="/feed.xml">XML Feed</a></li>
                
            </ul>
        </div>

        <!-- end /.fixed-condition -->
    </div>
    <div class="col-sm-8 col-offset-1 main-layout">
        <header class="post-header">
  <h1 class="post-title">Super charge a Google cloud functions project</h1>
</header>

<span class="time">19 Jun 2020</span>

  <span class="categories">
    &raquo; <a href="/">post</a>
  </span>


<div class="content">
  <div class="post"><p><br />
When developing a microservices project with cloud functions, managing the cluster of functions all of them together can be a scattered and complex scenario. That is why I thought of developing a simple cli tool to super charge the development and deployment process.</p>

<p>I named this little Pythonic tool as <strong>gostep</strong> a.k.a serverless templates provider for Google cloud platform. However this tool is still taking the baby steps. Hope to develop this to be more useful in future releases.</p>

<p>I would like to show you how it works up to now.</p>

<h3 id="first-of-all">First of all…</h3>
<p>You need to have installed below components to use gostep cli.</p>
<ol>
  <li>Python version 3.x with PyPI a.k.a pip(<a href="https://www.python.org/download/releases/3.0/">https://www.python.org/download/releases/3.0</a>, <a href="https://pypi.org/project/pip/">https://pypi.org/project/pip</a>)</li>
  <li>Gcloud sdk(<a href="https://cloud.google.com/sdk">https://cloud.google.com/sdk</a>)</li>
  <li>subversion(<a href="https://subversion.apache.org">https://subversion.apache.org</a>)</li>
  <li>gostep(<a href="https://github.com/codimite/gostep">https://github.com/codimite/gostep</a>)</li>
</ol>

<h3 id="next-steps">Next steps…</h3>
<p>Now simply install gostep cli.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip install gostep
</code></pre></div></div>

<p>After installing gostep, using gcloud sdk log in to your google cloud platform account.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gcloud auth login
</code></pre></div></div>
<p>Once you logged in, select the gcloud project that you want to use for your serverless functions.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gcloud config set project {projectId}
</code></pre></div></div>
<p>To list down project Ids <code class="language-plaintext highlighter-rouge">gcloud projects list</code> or <code class="language-plaintext highlighter-rouge">gostep gcloud projects</code> can be used.</p>

<h3 id="all-set">All set…</h3>
<p>Now we are ready build a cloud functions cluster.
First gostep needs a workspace directory, a gcloud service account and a credentials file for deployment purposes.
We can initiate them by this command, <code class="language-plaintext highlighter-rouge">gostep auth init {new_service_account_name} inside {workspace_directory}</code>.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gostep auth init my-service-account inside ./my-workspace
</code></pre></div></div>
<p>Now we can see a credentials file has been generated inside the workspace.
Next we need to create a configuration file which keeps the project skeleton. We need to chose a default region for that. Otherwise gostep will choose that for us. To get a list for our gcloud project <code class="language-plaintext highlighter-rouge">gostep gcloud locations</code> can be used. Now we can simply do,</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gostep base init {project_name} location{gcloud_region_id} version "0.1.0" explains {description} inside {workspace_directory}
</code></pre></div></div>
<p>In our case,</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd my-workspace
gostep base init my-new-project location asia-east2 version "0.1.0" explains "my sample project"
</code></pre></div></div>
<p>It’s geen light now to create cloud functions now. gostep has <a href="https://github.com/codimite/gostep-templates">specified template structures</a> for this.
Let’s simply bootstrap a python cloud function. For this purpose,</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gostep service init {cloud_function_name} location {gcloud_region_id} version {service_version} env {runtime} explains {desciption} inside {workspace_directory}
</code></pre></div></div>
<p>Since we are in the workspace directory and we already set up a default location Id we won’t be using <code class="language-plaintext highlighter-rouge">location</code> and <code class="language-plaintext highlighter-rouge">inside</code> arguments.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gostep service init my-python-function version "0.1.0" env python
</code></pre></div></div>
<p>Let’s bootstrap another function with nodeJs.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gostep service init my-nodejs-function version "0.1.0" env nodejs
</code></pre></div></div>
<p>We can see source files inside the <code class="language-plaintext highlighter-rouge">{workspace_directory}/src</code>. In our case inside, <code class="language-plaintext highlighter-rouge">my-workspace/src/my-nodejs-function</code> and <code class="language-plaintext highlighter-rouge">my-workspace/src/my-python-function</code>.</p>

<h3 id="great">Great…!</h3>
<p>Now our project is ready to get deployed.
Aight… Let’s do,</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gostep deploy diff
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">diff</code> keyword will only deploy the changes we made for our functions(gostep tracks md5 of the function directory). To deploy a single function it needs to be called by name. <code class="language-plaintext highlighter-rouge">gostep deploy {function_name}</code>. In our case,</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gostep deploy my-nodejs-function
</code></pre></div></div>

<h3 id="bravo">Bravo…!</h3>
<p>Now our functions are deployed and ready to be executed.
<img src="/static/img/posts/gostep/functions.png" alt="cfunctions" /></p>

<h3 id="in-future-releases">In future releases…</h3>
<ul>
  <li>More templates, templates for go lang, templates for Spring framework, etc…</li>
  <li>Handle function triggers such as pubsub, events, etc…</li>
  <li>Run cloud functions cluster in local environment, so developers can benefit debugging.</li>
</ul>

<p>Please find the source code in <a href="https://github.com/codimite/gostep">https://github.com/codimite/gostep</a>.</p>
</div>
  <div class="share-page">
  <span style="float: left;">Share this on &rarr;&nbsp;&nbsp;</span>

  <!-- Twitter -->
  <a href="https://twitter.com/share" class="twitter-share-button" data-via="lpsandaruwan">Tweet</a>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

  <!-- Facebook -->
  <div class="fb-share-button" data-href="https://lahiru.io/post/2020/06/19/gostep-intro.html" data-layout="button_count" style="position: relative; top: -8px; left: 3px;"></div>
</div>

<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.6&appId=1749788565247320";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

</div>


  
    
      
        
          
      
    
  
    
      
        
          
            
            <div class="panel-body">
              <h4>More reads</h4>
              <ul>
            
                <li class="relatedPost">
                  <a href="https://lahiru.io/post/2018/03/01/tomcat-gce-ansible-demo.html">Application Deployment in Apache Tomcat on GCE Using Ansible</a>
                  
                    (Categories: <a href="/category/post">post</a>)
                  
                </li>
          
          
        
      
    
  
    
      
        
          
            
                <li class="relatedPost">
                  <a href="https://lahiru.io/post/2017/05/11/sb1095-volume-knob-linux.html">Setting up Creative Labs USB DAC volume knob on Linux</a>
                  
                    (Categories: <a href="/category/post">post</a>)
                  
                </li>
          
          
        
      
    
  
    
      
        
          
            
                <li class="relatedPost">
                  <a href="https://lahiru.io/post/2017/04/20/github-sonarqube.html">Continuous Code Quality On My OpenSource Project</a>
                  
                    (Categories: <a href="/category/post">post</a>)
                  
                </li>
          
          
        
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
            
                <li class="relatedPost">
                  <a href="https://lahiru.io/post/2017/02/26/jvm-cpu-usage.html">JVM CPU usage using Java MXBeans</a>
                  
                    (Categories: <a href="/category/post">post</a>)
                  
                </li>
          
          
        
      
    
  
    
      
        
          
      
    
  
    
      
        
          
            
                <li class="relatedPost">
                  <a href="https://lahiru.io/post/2017/02/23/surgeon-tux.html">Surgeon Tux - A Jekyll template</a>
                  
                    (Categories: <a href="/category/post">post</a>)
                  
                </li>
          
          
        
      
    
  
    
      
        
          
      
    
  
  
  </ul>
</div>


<div class="PageNavigation">
  
    <a class="prev" href="/post/2018/03/01/tomcat-gce-ansible-demo.html">&laquo; Application Deployment in Apache Tomcat on GCE Using Ansible</a>
  
  
</div>

<div class="disqus-comments">
  <div id="disqus_thread"></div>
  <script>
      var disqus_config = function () {
          this.page.url = 'https://lahiru.io/post/2020/06/19/gostep-intro.html';
          this.page.identifier = 'https://lahiru.io/post/2020/06/19/gostep-intro.html';
      };
      (function() {
          var d = document, s = d.createElement('script');
          s.src = 'https://lpsandaruwan.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

        <footer>
            &copy; Lahiru Pathirage
            
            - <a href="https://github.com/lpsandaruwan">https://github.com/lpsandaruwan</a> - Powered by Jekyll.
            
        </footer>
    </div>
</div>
<!-- end /.container -->

<!-- Bootstrap core JavaScript -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
<script src="/static/js/bootstrap.min.js"></script>
<script src="/static/js/super-search.js"></script>
<script src="/static/js/thickbox-compressed.js"></script>
<script src="/static/js/projects.js"></script>
</body>
</html>

