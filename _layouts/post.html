---
layout: desktop
---

<div id="desktop">
  <div id="wallpaper"></div>
  
  <!-- Desktop Icons -->
  <div class="desktop-icons">
    <div class="desktop-icon" onclick="goToPostsList()" ondblclick="goToPostsList()">
      <div class="desktop-icon-image">
        <svg width="48" height="48" viewBox="0 0 24 24">
          <path d="M10 4H4c-1.11 0-2 .89-2 2v12c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2h-8l-2-2z"/>
        </svg>
      </div>
      <div class="desktop-icon-label">Posts</div>
    </div>
  </div>

  <!-- Start Menu / Application Launcher -->
  <div id="start-menu" class="start-menu hidden">
    <div class="start-menu-header">
      <div class="user-info">
        <div class="user-avatar">
          <img src="/assets/images/profile.jpg" alt="User Avatar" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
          <div class="avatar-placeholder" style="display: none;">
            <svg width="32" height="32" viewBox="0 0 24 24">
              <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
            </svg>
          </div>
        </div>
        <div class="user-details">
          <div class="user-name">Lahiru Sandaruwan</div>
          <div class="user-status">Online</div>
        </div>
      </div>
      <div class="search-box">
        <input type="text" placeholder="Search applications..." id="menu-search">
        <svg width="16" height="16" viewBox="0 0 24 24">
          <path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L20.49,19.78L19.78,20.49L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/>
        </svg>
      </div>
    </div>
    
    <div class="start-menu-content">
      <div class="menu-section">
        <h3>Blog & Portfolio</h3>
        <div class="app-list">
          <div class="menu-app" onclick="goToPostsList(); closeStartMenu();">
            <div class="app-icon">
              <svg width="24" height="24" viewBox="0 0 24 24">
                <path d="M10 4H4c-1.11 0-2 .89-2 2v12c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2h-8l-2-2z"/>
              </svg>
            </div>
            <div class="app-info">
              <div class="app-name">My Blog Posts</div>
              <div class="app-desc">Read my latest articles</div>
            </div>
          </div>
          
          <div class="menu-app" onclick="window.open('https://github.com/lpsandaruwan', '_blank'); closeStartMenu();">
            <div class="app-icon github-icon">
              <svg width="24" height="24" viewBox="0 0 24 24">
                <path d="M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z"/>
              </svg>
            </div>
            <div class="app-info">
              <div class="app-name">GitHub Profile</div>
              <div class="app-desc">My code repositories</div>
            </div>
          </div>
        </div>
      </div>

      <div class="menu-section">
        <h3>Social Media</h3>
        <div class="app-list">
          <div class="menu-app" onclick="window.open('https://linkedin.com/in/lpsandaruwan', '_blank'); closeStartMenu();">
            <div class="app-icon linkedin-icon">
              <svg width="24" height="24" viewBox="0 0 24 24">
                <path d="M19 3A2 2 0 0 1 21 5V19A2 2 0 0 1 19 21H5A2 2 0 0 1 3 19V5A2 2 0 0 1 5 3H19M18.5 18.5V13.2A3.26 3.26 0 0 0 15.24 9.94C14.39 9.94 13.4 10.46 12.92 11.24V10.13H10.13V18.5H12.92V13.57C12.92 12.8 13.54 12.17 14.31 12.17A1.4 1.4 0 0 1 15.71 13.57V18.5H18.5M6.88 8.56A1.68 1.68 0 0 0 8.56 6.88C8.56 5.95 7.81 5.19 6.88 5.19A1.69 1.69 0 0 0 5.19 6.88C5.19 7.81 5.95 8.56 6.88 8.56M8.27 18.5V10.13H5.5V18.5H8.27Z"/>
              </svg>
            </div>
            <div class="app-info">
              <div class="app-name">LinkedIn</div>
              <div class="app-desc">Professional network</div>
            </div>
          </div>
          
          <div class="menu-app" onclick="window.open('https://twitter.com/lpsandaruwan', '_blank'); closeStartMenu();">
            <div class="app-icon twitter-icon">
              <svg width="24" height="24" viewBox="0 0 24 24">
                <path d="M22.46,6C21.69,6.35 20.86,6.58 20,6.69C20.88,6.16 21.56,5.32 21.88,4.31C21.05,4.81 20.13,5.16 19.16,5.36C18.37,4.5 17.26,4 16,4C13.65,4 11.73,5.92 11.73,8.29C11.73,8.63 11.77,8.96 11.84,9.27C8.28,9.09 5.11,7.38 3,4.79C2.63,5.42 2.42,6.16 2.42,6.94C2.42,8.43 3.17,9.75 4.33,10.5C3.62,10.5 2.96,10.3 2.38,10C2.38,10 2.38,10 2.38,10.05C2.38,12.15 3.86,13.85 5.82,14.24C5.46,14.34 5.08,14.39 4.69,14.39C4.42,14.39 4.15,14.36 3.89,14.31C4.43,15.95 6,17.16 7.89,17.19C6.43,18.45 4.58,19.13 2.56,19.13C2.22,19.13 1.88,19.11 1.54,19.07C3.44,20.29 5.7,21 8.12,21C16,21 20.33,14.46 20.33,8.79C20.33,8.6 20.33,8.42 20.32,8.23C21.16,7.63 21.88,6.87 22.46,6Z"/>
              </svg>
            </div>
            <div class="app-info">
              <div class="app-name">X (Twitter)</div>
              <div class="app-desc">Follow my updates</div>
            </div>
          </div>
        </div>
      </div>

      <div class="menu-section">
        <h3>Contact & Media</h3>
        <div class="app-list">
          <div class="menu-app" onclick="window.open('mailto:hello@lpsandaruwan.dev', '_blank'); closeStartMenu();">
            <div class="app-icon gmail-icon">
              <svg width="24" height="24" viewBox="0 0 24 24">
                <path d="M20 4H4C2.89 4 2 4.89 2 6V18C2 19.11 2.89 20 4 20H20C21.11 20 22 19.11 22 18V6C22 4.89 21.11 4 20 4M20 18H4V8L12 13L20 8V18M20 6L12 11L4 6H20Z"/>
              </svg>
            </div>
            <div class="app-info">
              <div class="app-name">Email Me</div>
              <div class="app-desc">hello@lpsandaruwan.dev</div>
            </div>
          </div>
          
          <div class="menu-app" onclick="window.open('https://youtube.com/@lpsandaruwan', '_blank'); closeStartMenu();">
            <div class="app-icon youtube-icon">
              <svg width="24" height="24" viewBox="0 0 24 24">
                <path d="M10,16.5V7.5L16,12M20,4.4C19.4,4.2 15.7,4 12,4C8.3,4 4.6,4.2 4,4.4C3.4,4.6 3,5.9 3,12C3,18.1 3.4,19.4 4,19.6C4.6,19.8 8.3,20 12,20C15.7,20 19.4,19.8 20,19.6C20.6,19.4 21,18.1 21,12C21,5.9 20.6,4.6 20,4.4Z"/>
              </svg>
            </div>
            <div class="app-info">
              <div class="app-name">YouTube Channel</div>
              <div class="app-desc">Tech tutorials & content</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="start-menu-footer">
      <div class="menu-action" onclick="showPowerMenu()">
        <svg width="16" height="16" viewBox="0 0 24 24">
          <path d="M16.56,5.44L15.11,6.89C16.84,7.94 18,9.83 18,12A6,6 0 0,1 12,18A6,6 0 0,1 6,12C6,9.83 7.16,7.94 8.88,6.88L7.44,5.44C5.36,6.88 4,9.28 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12C20,9.28 18.64,6.88 16.56,5.44M13,3H11V13H13"/>
        </svg>
        Power
      </div>
      <div class="menu-action">
        <svg width="16" height="16" viewBox="0 0 24 24">
          <path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9L10,17Z"/>
        </svg>
        Lock
      </div>
    </div>
  </div>
  
  <!-- Desktop Widgets (Conky-style) -->
  <div class="desktop-widgets">
    <!-- About Me Widget -->
    <div class="desktop-widget bio-widget">
      <div class="widget-content">
        <div class="bio-photo">
          <img src="/assets/images/profile.jpg" alt="Profile Picture" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
          <div class="profile-placeholder" style="display: none;">
            <svg width="64" height="64" viewBox="0 0 24 24">
              <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
            </svg>
          </div>
        </div>
        <div class="bio-info">
          <h4 class="bio-name">{{ site.author.name | default: "Lahiru Sandaruwan Pathirage" }}</h4>
          <p class="bio-title">Lead Software Engineer</p>
          <div class="bio-details">
            <div class="bio-item">
              <svg width="16" height="16" viewBox="0 0 24 24">
                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
              </svg>
              <span>Colombo, Sri Lanka</span>
            </div>
            <div class="bio-item">
              <svg width="16" height="16" viewBox="0 0 24 24">
                <path d="M12 12c0 3-2.5 3-2.5 3s-2.5 0-2.5-3c0-1.5 1-3 2.5-3s2.5 1.5 2.5 3zm5 0c0 3-2.5 3-2.5 3s-2.5 0-2.5-3c0-1.5 1-3 2.5-3s2.5 1.5 2.5 3zm-10 0c0 3-2.5 3-2.5 3s-2.5 0-2.5-3c0-1.5 1-3 2.5-3s2.5 1.5 2.5 3z"/>
                <path d="M12 2C8.13 2 5 5.13 5 9c0 1.74.5 3.37 1.41 4.84.95 1.54 2.2 2.86 3.66 3.85.13.09.27.17.4.25.14-.08.27-.16.4-.25 1.46-.99 2.71-2.31 3.66-3.85C15.5 12.37 16 10.74 16 9c0-3.87-3.13-7-7-7z"/>
              </svg>
              <span>Natialie and Riana's proud father</span>
            </div>
            <div class="bio-item">
              <svg width="16" height="16" viewBox="0 0 24 24">
                <path d="M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82zM12 3L1 9l11 6 9-4.91V17h2V9L12 3z"/>
              </svg>
              <span>Computer Science Graduate • 2016</span>
            </div>
            <div class="bio-item">
              <svg width="16" height="16" viewBox="0 0 24 24">
                <path d="M12 1L8 5h3v4H7l4 4 4-4h-4V5h3l-4-4zm0 16c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                <circle cx="12" cy="13" r="2"/>
                <path d="M19 7h-3V6a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v1H5a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1zM10 6h4v1h-4V6zm2 12a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"/>
              </svg>
              <span>AI Agents & Serverless Fanatic</span>
            </div>
            <div class="bio-item">
              <svg width="16" height="16" viewBox="0 0 24 24">
                <path d="M12.5 2C13.81 2 15.29 3.42 15.29 5S13.81 8 12.5 8C11.19 8 9.71 6.58 9.71 5S11.19 2 12.5 2M21 9V7L15 1L9 7V9C9 10.1 9.9 11 11 11V22H13V11C14.1 11 15 10.1 15 9H21Z"/>
                <circle cx="6" cy="19" r="2"/>
                <path d="M14 13v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-6c0-1.1.9-2 2-2h8c1.1 0 2 .9 2 2z"/>
              </svg>
              <span>Linux & Open Source Evangelist</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Welcome Widget -->
    <div class="desktop-widget intro-widget">
      <div class="widget-content">
        <div class="intro-text">
          <p>Hey, I'm Lahiru Pathirage. I've been professionally building software since 2016, working on everything from simple tools to complex enterprise systems. One thing that's always held true for me is that good design leads to great software. I'm deeply focused on AI agents and serverless architecture; building systems that are intelligent, scalable, and require minimal human intervention. I'm a computer science graduate who feels at home in a terminal, loves Linux, and believes open source makes everything better.</p>
        </div>
      </div>
    </div>

    <!-- Blog Stats Widget -->
    <div class="desktop-widget stats-widget">
      <div class="widget-content">
        <div class="stat-item">
          <div class="stat-icon">
            <svg width="20" height="20" viewBox="0 0 24 24">
              <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
            </svg>
          </div>
          <div class="stat-info">
            <span class="stat-number">{{ site.posts.size }}</span>
            <span class="stat-label">Total Posts</span>
          </div>
        </div>
        <div class="stat-item">
          <div class="stat-icon">
            <svg width="20" height="20" viewBox="0 0 24 24">
              <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
            </svg>
          </div>
          <div class="stat-info">
            <span class="stat-number">{{ site.posts | map: 'content' | join: ' ' | number_of_words }}</span>
            <span class="stat-label">Total Words</span>
          </div>
        </div>
        <div class="stat-item">
          <div class="stat-icon">
            <svg width="20" height="20" viewBox="0 0 24 24">
              <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
            </svg>
          </div>
          <div class="stat-info">
            <span class="stat-number">{% assign categories = site.posts | map: 'categories' | join: ',' | split: ',' | uniq %}{{ categories.size }}</span>
            <span class="stat-label">Categories</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="taskbar">
    <div class="taskbar-left">
      <div class="app-launcher" onclick="toggleApplicationMenu()">
        <svg width="24" height="24" viewBox="0 0 24 24">
          <path d="M12 2L2 7l10 5 10-5-10-5z"/>
          <path d="m2 17 10 5 10-5"/>
          <path d="m2 12 10 5 10-5"/>
        </svg>
      </div>
      <div class="taskbar-apps">
        <div class="app-icon active" data-app="text-editor" data-type="kate" title="{{ page.title | escape }} - Kate">
          <svg width="20" height="20" viewBox="0 0 24 24">
            <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
          </svg>
          <span class="app-icon-text">{{ page.title | truncate: 17 }} - Kate</span>
        </div>
      </div>
    </div>
    <div class="taskbar-right">
      <div class="system-tray">
        <div class="clock" id="clock"></div>
      </div>
    </div>
  </div>
  
  <div id="text-editor" class="window maximized">
    <div class="window-titlebar">
      <div class="window-title">
        <svg width="16" height="16" viewBox="0 0 24 24">
          <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
        </svg>
        {{ page.title | escape }} - Kate
      </div>
      <div class="window-controls">
        <button class="window-minimize" onclick="minimizeWindow('text-editor')" title="Minimize">−</button>
        <button class="window-maximize" onclick="maximizeWindow('text-editor')" title="Restore">◱</button>
        <button class="window-close" onclick="goToDesktopHome()" title="Close">×</button>
      </div>
    </div>
    <div class="window-toolbar">
      <div class="toolbar-buttons">
        <button class="toolbar-btn" onclick="goToPostsList()">← Back</button>
        <div class="zoom-controls">
          <button class="zoom-btn" onclick="zoomOut()" title="Zoom Out">−</button>
          <span class="zoom-level" id="zoom-level">100%</span>
          <button class="zoom-btn" onclick="zoomIn()" title="Zoom In">+</button>
          <button class="zoom-btn" onclick="resetZoom()" title="Reset Zoom">⌂</button>
        </div>
      </div>
    </div>
    <div class="window-content">
      <div class="editor-content">
        <div class="post-header">
          <h1 class="post-title">{{ page.title | escape }}</h1>
          <div class="post-meta">
            <time datetime="{{ page.date | date_to_xmlschema }}">{{ page.date | date: "%B %d, %Y" }}</time>
            {% if page.author %} • <span>{{ page.author }}</span>{% endif %}
            • {{ content | number_of_words }} words
            • {{ content | number_of_words | divided_by: 200 | at_least: 1 }} min read
          </div>
        </div>
        
        <div class="post-content">
          {{ content }}
        </div>
        
        <!-- Disqus Comments -->
        {% if site.comments.active == 'disqus' and site.comments.disqus.shortname %}
        <div class="post-comments">
          <div id="disqus_thread"></div>
          <script>
            var disqus_config = function () {
              this.page.url = "{{ site.url }}{{ page.url }}";
              this.page.identifier = "{{ page.url }}";
              this.page.title = "{{ page.title | escape }}";
            };
            (function() {
              var d = document, s = d.createElement('script');
              s.src = 'https://{{ site.comments.disqus.shortname }}.disqus.com/embed.js';
              s.setAttribute('data-timestamp', +new Date());
              (d.head || d.body).appendChild(s);
            })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>
        {% endif %}
        
        <div class="post-navigation">
          {% if page.previous.url %}
            <a href="{{ page.previous.url }}" class="nav-btn">← {{ page.previous.title }}</a>
          {% endif %}
          {% if page.next.url %}
            <a href="{{ page.next.url }}" class="nav-btn">{{ page.next.title }} →</a>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// Go to desktop home view (for close button)
function goToDesktopHome() {
  const baseUrl = '{{ site.baseurl | default: "" }}' + '/';
  window.location.href = baseUrl;
}

// Go to posts list (for back button) - redirect to home with file manager open
function goToPostsList() {
  const baseUrl = '{{ site.baseurl | default: "" }}' + '/';
  // Add a hash to indicate we want to open the file manager
  window.location.href = baseUrl + '#open-file-manager';
}

// Smart navigation for menu items - go to home if external referrer
function goToHome() {
  const baseUrl = '{{ site.baseurl | default: "" }}' + '/';
  
  // Check if there's a previous page in history within our site
  if (document.referrer && document.referrer.includes(window.location.origin)) {
    // If the referrer is from our site, go back
    window.history.back();
  } else {
    // If accessed directly or from external site, go to home
    window.location.href = baseUrl;
  }
}

// Simple Kate post functionality
document.addEventListener('DOMContentLoaded', function() {
  // Taskbar functionality
  const kateTaskbarIcon = document.querySelector('[data-app="text-editor"]');
  const kateWindow = document.getElementById('text-editor');
  
  if (kateTaskbarIcon && kateWindow) {
    kateTaskbarIcon.addEventListener('click', function() {
      if (kateWindow.classList.contains('minimized')) {
        kateWindow.classList.remove('minimized');
        kateWindow.classList.add('maximized');
        kateTaskbarIcon.classList.add('active');
        kateTaskbarIcon.classList.remove('minimized');
      } else if (kateWindow.classList.contains('maximized')) {
        minimizeWindow('text-editor');
      } else {
        kateWindow.classList.add('maximized');
        kateTaskbarIcon.classList.add('active');
      }
    });
  }
  
  // Add simple copy buttons to code blocks
  addCodeCopyButtons();
});

function addCodeCopyButtons() {
  const codeBlocks = document.querySelectorAll('pre code');
  
  codeBlocks.forEach((block) => {
    const pre = block.parentElement;
    if (!pre || pre.querySelector('.copy-btn')) return;
    
    const copyButton = document.createElement('button');
    copyButton.className = 'copy-btn';
    copyButton.textContent = 'Copy';
    copyButton.title = 'Copy code to clipboard';
    
    copyButton.addEventListener('click', function() {
      navigator.clipboard.writeText(block.textContent).then(() => {
        copyButton.textContent = 'Copied!';
        setTimeout(() => {
          copyButton.textContent = 'Copy';
        }, 2000);
      }).catch(() => {
        // Fallback for older browsers
        const textArea = document.createElement('textarea');
        textArea.value = block.textContent;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        copyButton.textContent = 'Copied!';
        setTimeout(() => {
          copyButton.textContent = 'Copy';
        }, 2000);
      });
    });
    
    pre.style.position = 'relative';
    pre.appendChild(copyButton);
  });
}
</script>