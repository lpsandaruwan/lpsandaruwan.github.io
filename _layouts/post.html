---
layout: desktop
---

<div id="desktop">
  <div id="wallpaper"></div>
  
  <!-- Desktop Icons -->
  <div class="desktop-icons">
    <div class="desktop-icon" onclick="goToPostsList()" ondblclick="goToPostsList()">
      <div class="desktop-icon-image">
        <svg width="48" height="48" viewBox="0 0 24 24">
          <path d="M10 4H4c-1.11 0-2 .89-2 2v12c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2h-8l-2-2z"/>
        </svg>
      </div>
      <div class="desktop-icon-label">Posts</div>
    </div>
  </div>

  <!-- Desktop Widgets (Conky-style) -->
  <div class="desktop-widgets">
    <!-- About Me Widget -->
    <div class="desktop-widget bio-widget">
      <div class="widget-content">
        <div class="bio-photo">
          <img src="/assets/images/profile.jpg" alt="Profile Picture" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
          <div class="profile-placeholder" style="display: none;">
            <svg width="64" height="64" viewBox="0 0 24 24">
              <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
            </svg>
          </div>
        </div>
        <div class="bio-info">
          <h4 class="bio-name">{{ site.author.name | default: "Lahiru Sandaruwan Pathirage" }}</h4>
          <p class="bio-title">Lead Software Engineer</p>
          <div class="bio-details">
            <div class="bio-item">
              <svg width="16" height="16" viewBox="0 0 24 24">
                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
              </svg>
              <span>Colombo, Sri Lanka</span>
            </div>
            <div class="bio-item">
              <svg width="16" height="16" viewBox="0 0 24 24">
                <path d="M12 12c0 3-2.5 3-2.5 3s-2.5 0-2.5-3c0-1.5 1-3 2.5-3s2.5 1.5 2.5 3zm5 0c0 3-2.5 3-2.5 3s-2.5 0-2.5-3c0-1.5 1-3 2.5-3s2.5 1.5 2.5 3zm-10 0c0 3-2.5 3-2.5 3s-2.5 0-2.5-3c0-1.5 1-3 2.5-3s2.5 1.5 2.5 3z"/>
                <path d="M12 2C8.13 2 5 5.13 5 9c0 1.74.5 3.37 1.41 4.84.95 1.54 2.2 2.86 3.66 3.85.13.09.27.17.4.25.14-.08.27-.16.4-.25 1.46-.99 2.71-2.31 3.66-3.85C15.5 12.37 16 10.74 16 9c0-3.87-3.13-7-7-7z"/>
              </svg>
              <span>Natialie and Riana's proud father</span>
            </div>
            <div class="bio-item">
              <svg width="16" height="16" viewBox="0 0 24 24">
                <path d="M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82zM12 3L1 9l11 6 9-4.91V17h2V9L12 3z"/>
              </svg>
              <span>Computer Science Graduate • 2016</span>
            </div>
            <div class="bio-item">
              <svg width="16" height="16" viewBox="0 0 24 24">
                <path d="M12 1L8 5h3v4H7l4 4 4-4h-4V5h3l-4-4zm0 16c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                <circle cx="12" cy="13" r="2"/>
                <path d="M19 7h-3V6a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v1H5a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1zM10 6h4v1h-4V6zm2 12a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"/>
              </svg>
              <span>AI Agents & Serverless Fanatic</span>
            </div>
            <div class="bio-item">
              <svg width="16" height="16" viewBox="0 0 24 24">
                <path d="M12.5 2C13.81 2 15.29 3.42 15.29 5S13.81 8 12.5 8C11.19 8 9.71 6.58 9.71 5S11.19 2 12.5 2M21 9V7L15 1L9 7V9C9 10.1 9.9 11 11 11V22H13V11C14.1 11 15 10.1 15 9H21Z"/>
                <circle cx="6" cy="19" r="2"/>
                <path d="M14 13v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-6c0-1.1.9-2 2-2h8c1.1 0 2 .9 2 2z"/>
              </svg>
              <span>Linux & Open Source Evangelist</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Welcome Widget -->
    <div class="desktop-widget intro-widget">
      <div class="widget-content">
        <div class="intro-text">
          <p>Hey, I'm Lahiru Pathirage. I've been professionally building software since 2016, working on everything from simple tools to complex enterprise systems. One thing that's always held true for me is that good design leads to great software. I'm deeply focused on AI agents and serverless architecture; building systems that are intelligent, scalable, and require minimal human intervention. I'm a computer science graduate who feels at home in a terminal, loves Linux, and believes open source makes everything better.</p>
        </div>
      </div>
    </div>

    <!-- Blog Stats Widget -->
    <div class="desktop-widget stats-widget">
      <div class="widget-content">
        <div class="stat-item">
          <div class="stat-icon">
            <svg width="20" height="20" viewBox="0 0 24 24">
              <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
            </svg>
          </div>
          <div class="stat-info">
            <span class="stat-number">{{ site.posts.size }}</span>
            <span class="stat-label">Total Posts</span>
          </div>
        </div>
        <div class="stat-item">
          <div class="stat-icon">
            <svg width="20" height="20" viewBox="0 0 24 24">
              <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
            </svg>
          </div>
          <div class="stat-info">
            <span class="stat-number">{{ site.posts | map: 'content' | join: ' ' | number_of_words }}</span>
            <span class="stat-label">Total Words</span>
          </div>
        </div>
        <div class="stat-item">
          <div class="stat-icon">
            <svg width="20" height="20" viewBox="0 0 24 24">
              <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
            </svg>
          </div>
          <div class="stat-info">
            <span class="stat-number">{% assign categories = site.posts | map: 'categories' | join: ',' | split: ',' | uniq %}{{ categories.size }}</span>
            <span class="stat-label">Categories</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div id="text-editor" class="window maximized">
    <div class="window-titlebar">
      <div class="window-title">
        <svg width="16" height="16" viewBox="0 0 24 24">
          <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
        </svg>
        {{ page.title | escape }} - Kate
      </div>
      <div class="window-controls">
        <button class="window-minimize" onclick="minimizeWindow('text-editor')" title="Minimize">−</button>
        <button class="window-maximize" onclick="maximizeWindow('text-editor')" title="Restore">◱</button>
        <button class="window-close" onclick="goToDesktopHome()" title="Close">×</button>
      </div>
    </div>
    <div class="window-toolbar">
      <div class="toolbar-buttons">
        <button class="toolbar-btn" onclick="goToPostsList()">← Back</button>
        <div class="zoom-controls">
          <button class="zoom-btn" onclick="zoomOut()" title="Zoom Out">−</button>
          <span class="zoom-level" id="zoom-level">100%</span>
          <button class="zoom-btn" onclick="zoomIn()" title="Zoom In">+</button>
          <button class="zoom-btn" onclick="resetZoom()" title="Reset Zoom">⌂</button>
        </div>
      </div>
    </div>
    <div class="window-content">
      <div class="editor-content">
        <div class="post-header">
          <h1 class="post-title">{{ page.title | escape }}</h1>
          <div class="post-meta">
            <time datetime="{{ page.date | date_to_xmlschema }}">{{ page.date | date: "%B %d, %Y" }}</time>
            {% if page.author %} • <span>{{ page.author }}</span>{% endif %}
            • {{ content | number_of_words }} words
            • {{ content | number_of_words | divided_by: 200 | at_least: 1 }} min read
          </div>
        </div>
        
        <div class="post-content">
          {{ content }}
        </div>
        
        <!-- Disqus Comments -->
        {% if site.comments.active == 'disqus' and site.comments.disqus.shortname %}
        <div class="post-comments">
          <div id="disqus_thread"></div>
          <script>
            var disqus_config = function () {
              this.page.url = "{{ site.url }}{{ page.url }}";
              this.page.identifier = "{{ page.url }}";
              this.page.title = "{{ page.title | escape }}";
            };
            (function() {
              var d = document, s = d.createElement('script');
              s.src = 'https://{{ site.comments.disqus.shortname }}.disqus.com/embed.js';
              s.setAttribute('data-timestamp', +new Date());
              (d.head || d.body).appendChild(s);
            })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>
        {% endif %}
        
        <div class="post-navigation">
          {% if page.previous.url %}
            <a href="{{ page.previous.url }}" class="nav-btn">← {{ page.previous.title }}</a>
          {% endif %}
          {% if page.next.url %}
            <a href="{{ page.next.url }}" class="nav-btn">{{ page.next.title }} →</a>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// Go to desktop home view (for close button)
function goToDesktopHome() {
  const baseUrl = '{{ site.baseurl | default: "" }}' + '/';
  window.location.href = baseUrl;
}

// Go to posts list (for back button) - redirect to home with file manager open
function goToPostsList() {
  const baseUrl = '{{ site.baseurl | default: "" }}' + '/';
  // Add a hash to indicate we want to open the file manager
  window.location.href = baseUrl + '#open-file-manager';
}

// Smart navigation for menu items - go to home if external referrer
function goToHome() {
  const baseUrl = '{{ site.baseurl | default: "" }}' + '/';
  
  // Check if there's a previous page in history within our site
  if (document.referrer && document.referrer.includes(window.location.origin)) {
    // If the referrer is from our site, go back
    window.history.back();
  } else {
    // If accessed directly or from external site, go to home
    window.location.href = baseUrl;
  }
}

// Simple Kate post functionality
document.addEventListener('DOMContentLoaded', function() {
  // Add kate-view class to body to trigger CSS
  document.body.classList.add('kate-view');
  
  // Add simple copy buttons to code blocks
  addCodeCopyButtons();
  
  // Initialize zoom level display
  if (document.getElementById('zoom-level')) {
    document.getElementById('zoom-level').textContent = '100%';
  }
});

function addCodeCopyButtons() {
  const codeBlocks = document.querySelectorAll('pre code');
  
  codeBlocks.forEach((block) => {
    const pre = block.parentElement;
    if (!pre || pre.querySelector('.copy-btn')) return;
    
    const copyButton = document.createElement('button');
    copyButton.className = 'copy-btn';
    copyButton.textContent = 'Copy';
    copyButton.title = 'Copy code to clipboard';
    
    copyButton.addEventListener('click', function() {
      navigator.clipboard.writeText(block.textContent).then(() => {
        copyButton.textContent = 'Copied!';
        setTimeout(() => {
          copyButton.textContent = 'Copy';
        }, 2000);
      }).catch(() => {
        // Fallback for older browsers
        const textArea = document.createElement('textarea');
        textArea.value = block.textContent;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        copyButton.textContent = 'Copied!';
        setTimeout(() => {
          copyButton.textContent = 'Copy';
        }, 2000);
      });
    });
    
    pre.style.position = 'relative';
    pre.appendChild(copyButton);
  });
}

// Zoom functionality (placeholders)
function zoomIn() {
  // Placeholder for zoom in functionality
  console.log('Zoom in');
}

function zoomOut() {
  // Placeholder for zoom out functionality  
  console.log('Zoom out');
}

function resetZoom() {
  // Placeholder for reset zoom functionality
  console.log('Reset zoom');
}

function minimizeWindow(windowId) {
  // Placeholder for minimize functionality
  console.log('Minimize window:', windowId);
}

function maximizeWindow(windowId) {
  // Placeholder for maximize functionality
  console.log('Maximize window:', windowId);
}
</script>